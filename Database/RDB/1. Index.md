# Index란 ?
테이블에 저장된 데이터를 빠르게 조회하기 위한 DB 객체입니다.
* 대게 B-Tree, B+Tree 구조를 가집니다.
* Index는 논리적/물리적으로 테이블과 독립적입니다.
    
## Index 구조
* 거의 모든 DBMS는 B-Tree 계열 인덱스를 사용합니다.
    
## Index를 사용하는 이유
* SQL 서버에서 테이블을 만들고 데이터를 추가, 수정, 삭제할 때,<br/>
데이터의 레코드는 내부적으로 아무런 순서 없이 저장됩니다.
* 이때 데이터 저장 영역을 Heap이라고 합니다.
* Heap에서는 인덱스가 없는 테이블의 데이터를 찾을 때,<br/>
무조건 전체 데이터 페이지의 처음 레코드부터 끝 페이지의 마지막 레코드까지 다 읽어서 검색 조건과 비교하게 됩니다.
* 이런 방식의 데이터 검색 방법을 테이블 스캔(Table Scan)또는 풀 스캔(Full Scan)이라고 합니다.
* **양이 많은 테이블에서 일부분의 데이터만 불러올 경우, 풀 스캔을 하면 처리 성능이 떨어지게 됩니다.**
* **즉, Index는 데이터를 SELECT할 때 빨리 찾기 위해 사용됩니다.**

## Index 생성시, 고려할 점
인덱스가 좋다고 인덱스를 많이 만드는 것은 능사가 아닙니다.<br/>
**오히려 인덱스 관리 비용이 증가하고 INSERT, UPDATE, DELETE의 성능 저하의 원인이 될 수 있습니다.**<br/>
인덱스 사용시 다음 내용을 고려해야 합니다.

* 인덱스 키의 크기는 되도록 작게 설계해야 성능에 유리합니다.
* 분포도가 좋은 컬럼(좁은 범위), 기본 키, JOIN의 연결 고리가 되는 컬럼을 인덱스로 구성합니다.
* 단일 인덱스 여러 개보다 다중 컬럼 인덱스의 생성을 고려합니다.
* 업데이트가 빈번하지 않은 컬럼으로 인덱스를 구성합니다.
* JOIN시 자주 사용하는 컬럼은 인덱스로 등록합니다.
* 되도록 동등 비교(=)를 사용합니다.
* WHERE 절에서 자주 사용하는 컬럼에는 인덱스 추가를 고려합니다.
* 인덱스 스캔이 테이블 순차 스캔보다 항상 빠르지는 않습니다.<br/>
보통 선택도(selectivity)가 5~10% 이내인 경우에만 인덱스 스캔이 우수합니다.

## Index는 언제 적용해야 좋은가
* 인덱스는 SELECT 문의 WHERE, JOIN에서 좋은 성능을 발휘합니다.
* 대신 INSERT, UPDATE, DELETE 문에서는 성능이 떨어집니다.
* INSERT 문의 경우, 새로운 데이터를 삽입하면서 테이블뿐만 아니라 인덱스 테이블에도 생성을 해줘야 하며,<br/>
인덱스의 leaf block이 꽉 찼는데(정렬되어있음) 그 사이에 값이 들어온다면 다른 block으로 밀려나야할 데이터가 생기고,<br/> 
이렇게 되면 새로운 블럭에 key를 옮길 때 모든 과정이 redo에 기록되는 수고가 생깁니다.

