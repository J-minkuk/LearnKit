# OAuth
* 최근의 인터넷 서비스는 그 자체가 SaaS(Software as a Service)의 형태입니다.
    > 서비스 중에서 사용자가 일부 필요한 것만 사용할 수 있게 한다는 것입니다.
* 페이스북이나 트위터가 세상에 널리 퍼지게된 이유 중 하나가 외부 서비스에서도 페이스북과 트위터의 일부 기능을 사용할 수 있게 한 것입니다.
* 외부 서비스와 연동되는 페이스북이나 트위터의 기능을 이용하기 위해 사용자가 반드시 페이스북이나 트위터에 로그인을 해야하는 것이 아니라,
별도의 인증 절차를 거치면 다른 서비스에서 페이스북과 트위터의 기능을 이용할 수 있게 되는 것입니다.
* 이런 방식은 페이스북이나 트위터같은 서비스 제공자뿐만 아니라 사용자와 여러 인터넷 서비스 업체 모두에 이익이 되는 생태계를 구축하는데 기여하게 될 것입니다.
* 이 방식에서 사용하는 인증 절차가 OAuth입니다.

## OAuth와 로그인
* OAuth와 로그인은 반드시 분리해서 이해해야 합니다.
* 사원증을 이용해 출입할 수 있는 회사를 생각해보겠습니다.
* 외부 손님이 그 회사에 방문할 일이 있습니다. 회사 사원이 건물에 출입하는 것이 로그인이라면,
OAuth는 방문증을 수령한 후 회사에 출입하는 것을 비유할 수 있습니다.
* OAuth에서 'Auth'는 'Authentication(인증)'뿐만 아니라 'Authorization(허가)' 또한 포함하고 있는 것입니다.

## OAuth Dance, OAuth 1.0 인증 과정
* OAuth를 이용하여 사용자를 인증하는 과정을 OAuth Dance라고 합니다.
* OAuth의 대표 용어 정리

용어 | 설명
-----|-----
User | Service Provider에 계정을 갖고 있으면서, Consumer를 이용하려는 사용자
Service Provider | OAuth를 사용하는 Open API를 제공하는 서비스
Consumer | OAuth 인증을 사용해 Service Provider의 기능을 사용하려는 애플리케이션이나 웹 서비스
Request Token | Consumer가 Service Provider에게 접근 권한을 인증받기 위해 사용하는 값.<br/> 인증이 완료된 후에는 Access Token으로 교환합니다.
Access Token | 인증 후 Consumer가 Service Provider의 자원에 접근하기 위한 키를 포함한 값
 
* OAuth 인증 과정을 회사 방문 과정과 연결하는 다음과 같습니다.

회사 방문 과정 | OAuth 인증 과정
---------------|-----------------
나방문씨가 안내 데스크에서 업무적인 목적으로 김목적씨를 만나러 왔다고 말합니다. | Request Token의 요청과 발급
안내 데스크에서는 김목적씨에게 나방문씨가 방문했다고 연락합니다. | 사용자 인증 페이지 호출
김목적씨가 안내 데스크로 찾아와 나방문씨의 신원을 확인해줍니다. | 사용자 로그인 완료
김목적씨는 업무 목적과 인적 사항을 안내 데스크에서 기록합니다. | 사용자의 권한 요청 및 수락
안내 데스크에서 나방문씨에게 방문증을 발급해줍니다. | Access Token 발급
김목적씨와 나방문씨는 정해진 장소로 이동해 업무를 진행합니다. | Access Token을 이용해 서비스 정보 요청

* Access Token을 '방문증'이라고 이해할 수 있습니다.
* 이 방문증으로 사전에 허락된 공간에 출입할 수 있습니다.
* 마찬가지로 Access Token을 갖고 있는 Consumer는 사전에 호출이 허락된 Service Provider의 오픈 API를 호출할 수 있는 것입니다.

## OAuth 2.0
* OAuth 1.0은 웹 애플리케이션이 아닌 애플리케이션에서는 사용하기 곤란하다는 단점이 있습니다.
* 절차 또한 복잡하여 OAuth 구현 라이브러리를 제작하기 어렵고, 이런 복잡한 절차 때문에 Service Provider에게도 연산 부담이 발생합니다.
* OAuth 2.0은 이러한 단점을 개선한 것입니다.
* OAuth 1.0과 호환성이 없고, 아직 최종안이 발표된 것은 아니지만 여러 인터넷 서비스 기업에서 OAuth 2.0을 사용하고 있습니다.

### OAuth 2.0 특징
* 웹 애플리케이션이 아닌 애플리케이션 지원 강화
* 암호화가 필요 없고, HTTPS를 사용하고 HMAC을 사용하지 않습니다.
* Signature 단순화 정렬과 URL 인코딩이 필요 없습니다.
* Access Token 갱신 OAuth 1.0에서 Access Token을 받으면 계속 사용할 수 있었습니다. 트위터의 경우 Access Token을 만료시키지 않습니다. 
OAuth 2.0에서는 보안 강화를 위해 Access Token의 Life-Time을 지정할 수 있도록 했습니다.